##### Oracle Cloud Database Services

- Automated Database Services
= Database lifecycle automation provided
= User operates, has DBA and OS root access
= Runs older DB versions
= All database features (e.g Java, etc)
= Can be
=> ExaCS: scale, performance, availability
=> DBCS: VM or BM, single server or RAC
= Use Cases
=> Availability, Flexible Version and Features
=> Small to Large DB deployment, Single Instance or RAC
=> Automated Backup, Patching
=> Customer controls

- Autonomous Database
= All database operations fully automated
= User runs SQL, no access to OS or Containered DB
= Exadata Performance and Availability
= Customizable for DataWarehouse or TransacionProcessing workload
= Can be
=> Serverless: ultra-simple & elastic
=> Dedicated: Customizable Private Cloud
= Use Cases
=> Cloud elasticity, Self driving
=> Instant Provisioning, Always online operation
=> Support to all workloads, JSON Docs, Graphs

- Exadata
= Oracle builds, optimizes and automates infrastructure
= All in-database automation features included
= Use Cases
=> Private/Public cloud on-premise, Consolidation
=> Highest performance, scalability for mission critital workload

- Oracle Database
- User builds and operates databases and infrastructure
= Use Cases
=> Small to Big Database transactional need as weel as DataWarehouse needs
=> Customer Data Center, DIY model

- Autonomous Optimizations - Specialized by Workload
= Autonomous Data Warehouse (ADW)
=> Columnar Format
=> Creates Data summaries
=> Memory speeds joins, aggs
=> Statistics updated in real-time while preventing plan regressions
= Autonomous Transaction Processing (ATP)
=> Row Format
=> Creates indexes
=> Memory for caching to avoid IO
=> Statistics updated in real-time while preventing plan regressions

- Autonomous Database - Choice of Cloud deployment
= (look for table in presentation)

- Autonomous Database Cloud Service - Deployment Options
= Dedicated
=> Own dedicated Exadata cloud infrastructure, instead of shared with other tenants
= Serverless
=> Simplest configuration
=> Sharing resources of an Exadata cloud infrastructure
=> Quickly get started with no minimum commitment
=> Quick provisioning
=> Independent scalability of Compute and Storage
= Both deployment options are available for ADW and ATP

- Serverless
= Fully managed service
= Oracle automates end-to-end management of the autonomous database
=> Provisioning new databases
=> Resizing Storage and/or Compute
=> Patching and Upgrades
=> Backup and Recovery
= Full lifecycle managed using the service console
=> can be managed via command-line interface or REST API as well

- Automated tuning "Load and go"
= Define tables, load data, run queries
=> No tuning required
=> No special database expertise required
=> No need to worry about tablespaces, partitioning, compression, in-memory, indexes, concurrency
= Fast performance out of the box with zero tuning
= Simple web-based monitoring console
= Built-in resource-management plans

- Fully Elastic
= Size the database to the exact compute and storage requirements
=> Not constrained by fixed building blocks, no predefined shapes
= Scale the database on demand
=> Independently scale Compute or Storage
=> Resizing occurs instantly, fully online (no downservice)
= Shut off idle Compute to save money => restart instantly
= Auto Scaling
=> Enables to allow Autonomous DB to use more CPU and/or IO resources automatically when workload requires

- Full Support of Database Ecosystem
= Support of Existing tools, running on-prems or in the cloud
=> Third-party BI tools
=> Third-party data-integration tools
=> Oracle BI and data-integration tools: BIEE, ODI, etc
= Oracle cloud services
=> Analytics Cloud Service
=> Golden Gate Cloud Service
=> Integration Cloud Service
= Connectivity via SQL Net, JDBC, ODBC

##### Getting Started with Autonomous Database

- Provisioning a ADB requires 7 answers:
= Database Name
= Which data center (Region)
= How many CPU cores
= Storage capacity (in TB)
= Admin password
= License Type
= Enable auto scaling
- New service created within minutes (regardless of size)
= Database is open and ready for connections

- Auto Scaling Autonomous Databases
= Allows ADB to automatically increase the number of CPU by up to 3x
= Reduces the number of CPU cores when additional cores are not needed anymore
= Enable/Disable auto scaling at any time
= Database service determines the average number of CPUs/hour for billing purposes

- Securing ADB
= Stores all data in encrypted format. Only authenticated users and apps can access data
= DB clients use SSL/TLS 1.2 encrypted and mutually authenticated connections
=> Ensures no unauthorized access and client/server communication is fully encrypted
= Certificate based authentication uses an encrypted key stored in wallet in both client and server
=> A wallet contains a collection of files, including the key and other info needed to connect to the DBS
= Can specify IP address or CIDR block allowed to access the ADB using Access Control List

- Troubleshooting connectivity issues
= Ensure Access Control List for the ADB has necessary entries for CIDR Block ranges and IP addresses
= If connecting to ADB and client is behind a firewall
=> Firewall must permit the specified port in the database connection
=> Default port number for ADW is 1522
=> Port can be found in connection string from tnsnames.ora file in credentials zip file
=> Firewall must allow access to servers within *.oraclecloud.com using TCP port 1522
= If connection to ADB from a server in a private subnet in the same OCI tenancy
=> Ensure Service Gateway or NAT Gateway are attached to the VCN
=> Route Table must have appropriate routing rules for the gateway
=> Subnet Security List should have the appropriate Egress Rules
= If connection to ADB from a server in a public subnet in the same OCI tenancy
=> Ensure Route Table and Security Lists are properly configured

- Scaling your database
= Independently scale Compute or Storage
= Resizing occurs instantly, fully online (no downservice)
= Memory, IO bandwidth, concurrency scales linearly with CPU
= Shut off idle Compute to save money
= Restart instantly

- Monitoring
= Service COnsole based monitoring
=> Simplified monitoring using web-based service console
=> Historical and Real-Time database and CPU utilization
=> Real Time SQL Monitoring to monitor running and past SQL statements
=> CPU allocation chart to view number of CPUs used by the service
= Performance Hub based monitoring
=> Natively integrated in the OCI console and available via a single click in the ADB details page
=> Active Session History (ASH) analytics
=> Real Time SQL monitoring

- ADB Cloud - Backup and Restore
= Automatically backups, retention period is 60 days
= Daily incremental backups and weekly full backups
= Manual backups not needed but can be performed (e.g before ETL processing)
=> Backup files are stored in Object Storage bucket
=> When a point-in-time recovey is triggered the ADB Cloud decides which backup to use for faster recovery
= Recovery can be initiated using the Cloud Console.
= Network Access Control Lists (ACLs) are stored in the database with other DB metadata
=> If the DB is restored the ACL details are restored to that point-in-time as well

- Cloning
= Can choose to clone the full database or only its metadata
=> Full Clone: creates a new database with the source's data and metadata
=> Metadata Clone: creates a new database with the source's metadata only
= When creating a Full Clone, the mininum storage size is current source size rounded to the next TB
= Only possible to clone ADB instance to the same Region/Tenancy
= During the provisioning of the clone, the optimizer statistics are copied from the source to the clone
=> Full Clone: lods into tables behave the same as loading into a table with stats already in place
=> Metadata Clone: 1st table load clears the stats, subsequent load updates the stats

- Pre-defined Services for ADW
= Choice of performance and concurrency for ADW
= HIGH      --- CPU Shares = 4, Concurrent Queries = 3, Max Idle Time = 5 min
=> Highets resources, lowest concurrency
=> Queries run in parallel
= MEDIUM    --- CPU Shares = 2, Concurrent Queries = 20, Max Idle Time = 5 min
=> Less resources, higher concurrency
=> Queries run in parallel
= LOW       --- CPU Shares = 1, Concurrent Queries = 32, Max Idle Time = 1 hour
=> Least resources, highest concurrency
=> Queries run in serial
= For replication purposes the recommended is LOW. Use this with Oracle GoldenGate connections

- Pre-defined Services for ATP
= Controlling priority and parallelism
= Different services defined for Transactions an Reporting/Batch
=> HIGH     --- resource-management-plan-share = 4,  operations run in parallel and are subject to queuing
=> MEDIUM   --- resource-management-plan-share = 2,  operations run in parallel and are subject to queuing
=> LOW      --- resource-management-plan-share = 1,  no parallelism
=> TPURGENT --- resource-management-plan-share = 12, manual parallelism
=> TP       --- resource-management-plan-share = 8,  no parallelism

##### Autonomous Database - Dedicated (ADW & ATP)

- Provides a private cloud running on dedicated Exadata Infrastructure in the Public Cloud
- Has multiple levels of isolation
= protects from noisy and hostile neighbors
- Customizable operational polices gives control of provisioning, software updates, availability and density

- Physical characteristics and contraints
= Quarter rack X7 Exadata Infrastructure
=> 2 servers (92 OCPU, 1.44TB RAM)
=> 3 Storage Servers (76.8TB Flash, 107TB Disk)
= Cluster / VCN
=> 1 cluster per quarter rack
= Autonomous Container Database
=> Maximum of 4 per Cluster
= ADB
=> High Availability SLA - Maximum 100 DBs
=> Extreme Availability SLA - Maximun 25 DBs

- High Level Deployment Flow
= Create VCNN
= Provision Autonomous Exadata Infrastructure
= Create Autonomous Container Database
= Create Autonomous Database

- Security
= Databases always encrypted
= Reduced attack surface
= Automatic protection of customer data from Oracle operations staff
= Database Vault's new Operations Control feature
= Oracle automatically applies security updates for the entire stack
=> Quaterly, or off-clycle for high-impact security vulnerability
= Customer can seperately use DB Vault for their own user data isolation
